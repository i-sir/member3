<!--类型:1线上活动,2线下活动-->
<div class="form-group">
    <label class="col-sm-2 control-label">类型:</label>
    <div class="layui-input-block col-sm-6">
        <if condition="!empty($type)">
            <select class="form-control post-params" lay-search lay-filter="type" name="type">
                <foreach item="vo" key="key" name="type_list">
                    <option value="{$key}"
                    <if condition="$type eq $key ">selected</if>
                    >{$vo}</option>
                </foreach>
            </select>
            <else/>
            <select class="form-control post-params" lay-search lay-filter="type" name="type">
                <foreach item="vo" key="key" name="type_list">
                    <option value="{$key}">{$vo}</option>
                </foreach>
            </select>
        </if>
    </div>
</div>


<!--名称-->
<div class="form-group">
    <label class="col-sm-2 control-label">名称:</label>
    <div class="layui-input-block col-sm-6">
        <input type="text" name="name" class="form-control post-params item-left" value="{$name|default=''}">
    </div>
</div>


<!--报名费-->
<div class="form-group">
    <label class="col-sm-2 control-label">报名费:</label>
    <div class="layui-input-block col-sm-6">
        <input type="number" class="form-control post-params item-left" name="price" value="{$price|default=''}">
    </div>
</div>


<!--基础积分-->
<div class="form-group">
    <label class="col-sm-2 control-label">基础积分:</label>
    <div class="layui-input-block col-sm-6">
        <input type="number" name="base_point" class="form-control post-params item-left"
               value="{$base_point|default=''}">
    </div>
</div>


<!--奖励积分-->
<div class="form-group">
    <label class="col-sm-2 control-label">奖励积分:</label>
    <div class="layui-input-block col-sm-6">
        <input type="number" name="reward_point" class="form-control post-params item-left"
               value="{$reward_point|default=''}">
    </div>
</div>


<!--推荐积分-->
<div class="form-group">
    <label class="col-sm-2 control-label">推荐积分:</label>
    <div class="layui-input-block col-sm-6">
        <input type="number" name="invite_point" class="form-control post-params item-left"
               value="{$invite_point|default=''}">
    </div>
</div>


<div class="form-group">
    <label class="col-sm-2 control-label">早鸟积分:</label>
    <div class="layui-input-block col-sm-6">
        <input lay-skin="switch" lay-text="开启|关闭" name="is_early" type="checkbox"
        <if condition="$is_early == 1">checked</if>
        id="earlySwitch" lay-filter="earlySwitchFilter">
    </div>
</div>

<!-- 早鸟积分设置区域 -->
<div class="early-bird-settings" <if condition="$is_early != 1">style="display:none;"</if>>
<div class="form-group">
    <label class="col-sm-2 control-label">早鸟积分:</label>
    <div class="layui-input-block col-sm-6">
        <input type="number" name="early_point" class="form-control post-params item-left"
               value="{$early_point|default=''}">
    </div>
</div>

<div class="form-group">
    <label class="col-sm-2 control-label">活动当日前:</label>
    <div class="layui-input-block col-sm-6 layui-inline">
        <div class="layui-input-inline" style="width: 100px;">
            <input type="number" name="early_day" class="form-control post-params item-left" placeholder="n天"
                   value="{$early_day|default=''}">
        </div>
        <div class="layui-input-inline" style="width: 100px;">
            <input type="time" name="early_time" class="form-control post-params item-left"
                   value="{$early_time|default=''}">
        </div>
    </div>
</div>
</div>

<script>
    // 使用layui的方式监听开关事件
    layui.use('form', function() {
        var form = layui.form;

        // 监听开关切换事件
        form.on('switch(earlySwitchFilter)', function(data) {
            var settingsArea = document.querySelector('.early-bird-settings');
            if (data.elem.checked) {
                // 开启状态，显示设置项
                settingsArea.style.display = 'block';
            } else {
                // 关闭状态，隐藏设置项
                settingsArea.style.display = 'none';
            }
        });
    });
</script>


<!--封面-->
<div class="form-group">
    <label class="col-sm-2 control-label">封面:</label>
    <div class="layui-input-block col-sm-6">
        <input type="hidden" class="form-control post-params item-left" name="image" id="photo-0000009"
               value="{$image}">
        <if condition='!empty($image)'>
            <a href="javascript:imagePreviewDialog('{:cmf_get_asset_url($image)}');">
                <img src='{:cmf_get_image_preview_url($image)}' id='photo-0000009-preview' style='width: 85px;'>
            </a>
            <else/>
            <img src='/static/images/default.png' id='photo-0000009-preview' style='width: 85px;'>
        </if>
        <a href="javascript:uploadOneImage('图片上传','#photo-0000009','image');">上传</a>
        <a onclick="$('#photo-0000009-preview').attr('src','__TMPL__/public/assets/images/default-thumbnail.png');$('#photo-0000009').val('');return false;">取消图片</a>
    </div>
</div>


<!--图集-->
<div class="form-group">
    <label class="col-sm-2 control-label">图集:</label>
    <div class="layui-input-block col-sm-6">
        <div class="help-block text-danger">长按图片可上下拖动,调整图片顺序</div>
        <if condition="!empty($images)">
            <ul id="imagesId000000010" class="pic-list list-unstyled form-inline">
                <foreach name="$images" item="vo">
                    <li id="savedImages-000000010-{$key}" style="margin-bottom: 5px;">
                        <input id="photoImages-000000010-{$key}" class="form-control post-params item-left"
                               type="hidden" name="images[{$key}]" value="{$vo}">
                        <img id="photoImages-000000010-{$key}-preview" src="{:cmf_get_image_preview_url($vo)}"
                             height="50" onclick="parent.imagePreviewDialog(this.src);">
                        <a href="javascript:uploadOneImage('图片上传','#photoImages-000000010-{$key}');">替换</a>
                        <a href="javascript:(function(){$('#savedImages-000000010-{$key}').remove();})();">移除</a>
                    </li>
                </foreach>
            </ul>
            <else/>
            <ul id="imagesId000000010" class="pic-list list-unstyled form-inline">
                <li id="savedImages-000000010" style="margin-bottom: 5px;">
                </li>
            </ul>
        </if>
        <a href="javascript:uploadMultiImage('图片上传','#imagesId000000010','itemImages-000000010');"
           class="btn btn-sm btn-default">选择图片</a>
        <script type="text/html" id="itemImages-000000010">
            <li id="savedImages-000000010-{id}" style="margin-bottom: 5px;">
                <input id="photoImages-000000010-{id}" class="form-control post-params item-left" type="hidden"
                       name="images[{id}]" value="{filepath}">
                <img id="photoImages-000000010-{id}-preview" src="{url}" height="50"
                     onclick="imagePreviewDialog(this.src);">
                <a href="javascript:uploadOneImage('图片上传','#photoImages-000000010-{id}');">替换</a>
                <a href="javascript:(function(){$('#savedImages-000000010-{id}').remove();})();">移除</a>
            </li>
        </script>
        <script>
            // 多图上传支持排序
            new Sortable(imagesId000000010, {
                animation: 150,
                ghostClass: 'blue-background-class'
            });
        </script>
    </div>
</div>


<!--开始报名时间-->
<div class="form-group">
    <label class="col-sm-2 control-label">开始报名时间:</label>
    <div class="layui-input-block col-sm-6">
        <input class="form-control post-params item-left js-datetime" name="begin_time" required
               type="text"
               value="{:isset($begin_time) && $begin_time > 10000 ? date('Y-m-d H:i', $begin_time) : ''}">
    </div>
</div>


<!--截止报名时间-->
<div class="form-group">
    <label class="col-sm-2 control-label">截止报名时间:</label>
    <div class="layui-input-block col-sm-6">
        <input class="form-control post-params item-left js-datetime" name="end_time" required
               type="text"
               value="{:isset($end_time) && $end_time > 10000 ? date('Y-m-d H:i', $end_time) : ''}">
    </div>
</div>


<!--活动时间-->
<div class="form-group">
    <label class="col-sm-2 control-label">活动时间:</label>
    <div class="layui-input-block col-sm-6">
        <input type="text" name="time" class="form-control post-params item-left" value="{$time|default=''}">
    </div>
</div>


<!--报名人数-->
<div class="form-group">
    <label class="col-sm-2 control-label">报名人数:</label>
    <div class="layui-input-block col-sm-6">
        <input type="number" class="form-control post-params item-left" name="number" value="{$number|default=''}">
    </div>
</div>


<!--活动地点-->
<div class="form-group">
    <label class="col-sm-2 control-label">活动地点:</label>
    <div class="layui-input-block col-sm-6">
        <input type="text" name="address" class="form-control post-params item-left" value="{$address|default=''}">
    </div>
</div>


<!--活动规则-->
<div class="form-group">
    <label class="col-sm-2 control-label">活动规则:</label>
    <div class="layui-input-block col-sm-6">
        <textarea class="form-control post-params item-left" name="rules">{$rules|default=''}</textarea>
    </div>
</div>





